<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      .hidden {
        display: none;
      }
      .visible {
        display: initial;
      }
    </style>
  </head>
  <body>
    <div
      style="display: inline-block; position: relative; background-color: black;"
    >
      <div
        id="loaderId"
        class="visible"
        style="top: 0; bottom: 0; right: 0; left: 0; position: absolute; margin: auto; width: 100px; height: 100px;"
      >
        <svg
          width="100"
          height="100"
          viewBox="0 0 38 38"
          xmlns="http://www.w3.org/2000/svg"
          stroke="#fff"
        >
          <g fill="none" fill-rule="evenodd">
            <g transform="translate(1 1)" stroke-width="2">
              <circle stroke-opacity=".5" cx="18" cy="18" r="18" />
              <path d="M36 18c0-9.94-8.06-18-18-18">
                <animateTransform
                  attributeName="transform"
                  type="rotate"
                  from="0 18 18"
                  to="360 18 18"
                  dur="1s"
                  repeatCount="indefinite"
                />
              </path>
            </g>
          </g>
        </svg>
      </div>

      <img
        id="imgId"
        src="https://ik.imagekit.io/demo/img/image1.jpeg?tr=w-400,h-300"
        style="display: block; border: 1px solid green; min-width: 400px; min-height: 300px;"
      />
    </div>
    <div>
      <button id="btnId">
        nextImg
      </button>
    </div>

    <script>
      const urlsArr = [
        "https://ik.imagekit.io/demo/img/image1.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image2.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image3.jpg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image4.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image5.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image6.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image7.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image8.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image9.jpeg?tr=w-400,h-300",
        "https://ik.imagekit.io/demo/img/image10.jpeg?tr=w-400,h-300"
      ];

      function addOnLoadEventListener(img, loader) {
        img.addEventListener("load", function(event) {
          console.log(`event: `, event);
          console.log("Image finished loading!");
          loader.className = "hidden";
          img.removeEventListener("load", img);
        });
      }

      const image = document.getElementById("imgId");
      const loader = document.getElementById("loaderId");
      addOnLoadEventListener(image, loader);
      let counter = 0;
      document.getElementById("btnId").onclick = () => {
        counter++;
        addOnLoadEventListener(image, loader);
        loader.className = "visible";
        image.src = urlsArr[counter];
        console.log(`counter: `, counter);
      };
    </script>
  </body>
</html>
